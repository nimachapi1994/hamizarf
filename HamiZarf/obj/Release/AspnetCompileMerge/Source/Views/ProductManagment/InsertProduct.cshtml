
@{
    Layout = "~/Views/Shared/lay.cshtml";
}





@section scripts{


    <script src="~/Plugins/ckeditor/ckeditor.js"></script>
}


@using HamiZarf.Models
@model Product

    
        <body id="bd">
            <style>
                .Validation-error{
                    color:red;
                }
            </style>
            @for (int i = 0; i < 5; i++)
            {
                <br />
            }
         
            <br />
            <div style="margin:auto;width:60%">
                <a href="/productManagment/ShowAllProducts" class="btn btn-primary">مدیریت محصولات ثبت شده</a>
                <br />
                <form action="/ProductManagment/InsertProductConfirm" method="post" enctype="multipart/form-data">
                    <div class="form-group">
                        <label class="pull-right">انتخاب دسته اصلی</label>
                        <select dir="rtl" class="form-control" id="slcShowParentCategory" name="p_id">
                          
                            <option value="-1">--------------</option>
                           
                            @foreach (var item in ViewBag.showParentCategory as IEnumerable<HamiZarf.Models.ParentCategory>)
                            {

                                <option value="@item.Id">@item.Name</option>

                            }
                        </select>
                    
                    </div>
                    <div class="form-group">
                        <label class="pull-right">انتخاب زیر دسته</label>
                        <select dir="rtl" class="form-control" id="slcShowChildCategory" name="c_id">

                            
                          
                            <option value="-1">--------------</option>


                        </select>
                    </div>

                    <div class="form-group">
                        <div class="form-group form-inline">
                            <div class="form-group pull-right">

                                <input class="form-control" name="name" dir="rtl" placeholder="نام محصول" />
                            </div>
                            <div class="form-group pull-right">

                                <input class="form-control" name="price" dir="rtl" placeholder="قیمت" />
                            </div>
                        </div>
                    </div>


                    <div class="form-group pull-right">
                        <input class="form-control"name="unit" dir="rtl" placeholder="نوع واحد" />

                    </div>
                    <div class="form-group pull-right">
                     
                            <label style="color:lightgreen" id="lblAvailable"></label> <input class="checkbox pull-right" name="IsAvailable" type="checkbox" id="chkbIsAvialable" />                <label> : وضعیت موجودی</label>

                        

                    </div>
                   <br />
                    <hr />
                 
                    <div class="form-group pull-right">

                         <input class="checkbox pull-right" name="SpecialProduct" type="checkbox" />       <label> محصول ویژه</label>
                        <br />
                        <br />
                         <input class="checkbox pull-right" name="FullSaleProduct" type="checkbox"  />      <label>  محصول پر فروش</label>
                        <br />
                        <br />
                         <input class="checkbox pull-right" name="NewProduct" type="checkbox" />     <label> محصول جدید</label>





                    </div>
                    
                    <div class="container" style="margin:auto">
                        <div class="form-group">
                            <br />
                            <br />
                            <br />
                            <br />
                            <br />
                            <br />

                            <label class="pull-right">انتخاب تصویر</label>
                            <input type="file" id="txtimg" name="img" />
                        </div>
                    </div>
                    <div class="container" style="margin:auto">
                        <div class="form-group" id="divshowimg" style="margin:auto">
                            <button class="btn btn-danger btn-xs pull-right" type="button" id="btnClose">&times;</button>
                          
                         
                            
                                <img style="width:300px;height:300px" id="img" />

                            

                        </div>
                    </div>

                    <br />
                    <br />
                    <div class="container" style="margin:auto"dir="rtl">
                        <label class="control-label">متن</label>
                        <div class="form-group"  style="margin:auto;padding-right:30%">
                      
                            <br />
                            <input name="firsttxt" placeholder="حداکثر 3 جمله" class="form-control">


                        </div>
                    </div>
                    <br />
                    <br />


                
                    <div class="container" style="margin:auto">
                        <div class="form-group">
                            <textarea class="content" name="Txt" id="ck" dir="rtl"></textarea>                        </div>
                    </div>


                    @*<div class="form-group" >
                        <button class="btn btn-success"id="btnadd"type="button">+</button>
                        <br />
                        <div id="divaddpic">

                        <input type="file"  name="pic1" class="form-control"/>
                        </div>
                    </div>*@


                    <button class="btn btn-success btn-block"id="btnSend">ثبت محصول</button>
                </form>
            </div>       
            <script src="~/Plugins/MegaMenuForCategory/js/vendor/jquery-1.10.2.min.js"></script>
            <script>
                $(bd).html(function () {
                    $(divshowimg).hide();
                })
            </script>
            <script>
        $(slcShowParentCategory).change(function () {
            $(slcShowChildCategory).html('')
            jQuery.post('/ProductManagment/ShowChildCategoryByJson', { id: this.value }, function (result) {
                $(result).each(function (idx, p) {
                    $(slcShowChildCategory).append('<option value="' + p.id + '">' + p.name + '</option>')
                })
            })
        })
            </script>
            <script>

                $(btnsend).click(function () {
                    btnSend.textContent='لطفا منتظر بمانید ...'
                })

                //$(btnadd).click(function () {
                //    $(divaddpic).append(' <input type="file" name="pic1" class="form-control"/>')
                //})

            </script>
            <script>
       CKEDITOR.replace('ck', { filebrowserImageUploadUrl: '/ContentManagment/SendRequestImageAndBackImageUrl' })
            </script>

            <script>
                $(txtimg).change(function () {
                    var reader = new FileReader()
                    reader.readAsDataURL(txtimg.files[0])
                    reader.onloadend = function (ex) {

                        img.src = ex.target.result;
                        $(divshowimg).show(1000)
                    }



                })

            </script>
         
            <script>
                $(btnClose).click(function () {
                    $(img).attr('src', '');
                    $(divshowimg).hide();
                    txtimg.value = '';

                })
            </script>
        

            @for (int i = 0; i < 10; i++)
            {
                <br />
            }










          




            <script>
        $(chkbIsAvialable).change(function () {
            if (chkbIsAvialable.checked==true) {
                $(lblAvailable).html('موجود')
            }
            else {
                $(lblAvailable).html('')
            }
        })
            </script>
    
       

        </body>
  

